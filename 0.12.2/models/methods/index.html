
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A simple async ORM with fastapi in mind and pydantic validation.">
      
      
      
      
        <link rel="prev" href="../inheritance/">
      
      
        <link rel="next" href="../migrations/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.2.7">
    
    
      
        <title>Methods - ormar</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","UA-72514911-3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","UA-72514911-3",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=UA-72514911-3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#model-methods" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ormar" class="md-header__button md-logo" aria-label="ormar" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ormar
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Methods
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/collerek/ormar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    collerek/ormar
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ormar" class="md-nav__button md-logo" aria-label="ormar" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ormar
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/collerek/ormar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    collerek/ormar
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Definition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../inheritance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inheritance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Methods
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Methods
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pydantic-methods" class="md-nav__link">
    pydantic methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#construct" class="md-nav__link">
    construct
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dict" class="md-nav__link">
    dict
  </a>
  
    <nav class="md-nav" aria-label="dict">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#include-ormar-modified" class="md-nav__link">
    include (ormar modified)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude-ormar-modified" class="md-nav__link">
    exclude (ormar modified)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_unset" class="md-nav__link">
    exclude_unset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_defaults" class="md-nav__link">
    exclude_defaults
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_none" class="md-nav__link">
    exclude_none
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_primary_keys-ormar-only" class="md-nav__link">
    exclude_primary_keys (ormar only)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_through_models-ormar-only" class="md-nav__link">
    exclude_through_models (ormar only)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json" class="md-nav__link">
    json
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get_pydantic" class="md-nav__link">
    get_pydantic
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load" class="md-nav__link">
    load
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load_all" class="md-nav__link">
    load_all
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#save" class="md-nav__link">
    save
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    update
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upsert" class="md-nav__link">
    upsert
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    delete
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#save_related" class="md-nav__link">
    save_related
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../internals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Internals
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Fields
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Fields
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../fields/common-parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common parameters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../fields/field-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../fields/pydantic-fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic only fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../fields/encryption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields encryption
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../relations/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Relations
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_5">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Relations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../relations/postponed-annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Postponed annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../relations/foreign-key/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ForeignKey
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../relations/many-to-many/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ManyToMany
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../relations/queryset-proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    QuerySetProxy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../queries/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Queries
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_6">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Queries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../queries/create/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Insert data into database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../queries/read/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read data from database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../queries/update/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update data in database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../queries/delete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delete data from database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../queries/joins-and-subqueries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Joins and subqueries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../queries/filter-and-sort/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filtering and sorting data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../queries/select-columns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Selecting subset of columns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../queries/pagination-and-rows-number/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pagination and rows number
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../queries/aggregations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aggregation functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../queries/raw-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Return raw data
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../signals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Signals
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../transactions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transactions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Use with Fastapi
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Use with Fastapi
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../fastapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../fastapi/response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using ormar in responses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../fastapi/requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using ormar in requests
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Use with mypy
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyCharm plugin
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../releases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Api (BETA)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            Api (BETA)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ormar
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_14_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1">
            <span class="md-nav__icon md-icon"></span>
            ormar
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/decorators/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    decorators
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_1">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_14_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_1">
            <span class="md-nav__icon md-icon"></span>
            decorators
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/decorators/property_field/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    property_field
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/decorators/signals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    signals
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/fields/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    fields
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_14_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_3">
            <span class="md-nav__icon md-icon"></span>
            fields
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/constraints/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    constraints
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/foreign_key/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    foreign_key
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/many_to_many/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    many_to_many
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/model_fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    model_fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/parsers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    parsers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/referential_actions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    referential_actions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/sqlalchemy_encrypted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sqlalchemy_encrypted
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/sqlalchemy_uuid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sqlalchemy_uuid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/through_field/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    through_field
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/models/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    models
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_4">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_14_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_4">
            <span class="md-nav__icon md-icon"></span>
            models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_4_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/models/descriptors/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    descriptors
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_4_1">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_14_1_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_4_1">
            <span class="md-nav__icon md-icon"></span>
            descriptors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/descriptors/descriptors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    descriptors
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/excludable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    excludable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_4_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/models/helpers/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    helpers
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_4_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_14_1_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_4_3">
            <span class="md-nav__icon md-icon"></span>
            helpers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/helpers/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/helpers/pydantic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/helpers/related_names_validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    related_names_validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/helpers/relations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    relations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/helpers/sqlalchemy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sqlalchemy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/helpers/validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    validation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/metaclass/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    metaclass
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_4_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/models/mixins/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    mixins
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_4_5">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_14_1_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_4_5">
            <span class="md-nav__icon md-icon"></span>
            mixins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/mixins/alias_mixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    alias_mixin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/mixins/excludable_mixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    excludable_mixin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/mixins/merge_mixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    merge_mixin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/mixins/prefetch_mixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    prefetch_mixin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/mixins/pydantic_mixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_mixin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/mixins/relation_mixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    relation_mixin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/mixins/save_mixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    save_mixin
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/model_row/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    model_row
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/modelproxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    modelproxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/newbasemodel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    newbasemodel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/quick_access_views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    quick_access_views
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/traversible/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    traversible
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/protocols/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    protocols
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_5">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_14_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_5">
            <span class="md-nav__icon md-icon"></span>
            protocols
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/protocols/queryset_protocol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    queryset_protocol
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/protocols/relation_protocol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    relation_protocol
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/queryset/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    queryset
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_6">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_14_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_6">
            <span class="md-nav__icon md-icon"></span>
            queryset
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_6_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/queryset/actions/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    actions
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_6_1">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_14_1_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_6_1">
            <span class="md-nav__icon md-icon"></span>
            actions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/actions/filter_action/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filter_action
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/actions/order_action/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    order_action
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/actions/query_action/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    query_action
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/actions/select_action/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    select_action
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/clause/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    clause
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/field_accessor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    field_accessor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/join/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    join
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_6_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/queryset/queries/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    queries
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_6_5">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_14_1_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_6_5">
            <span class="md-nav__icon md-icon"></span>
            queries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/queries/filter_query/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filter_query
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/queries/limit_query/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    limit_query
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/queries/offset_query/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    offset_query
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/queries/order_query/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    order_query
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/queries/prefetch_query/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    prefetch_query
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/queries/query/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    query
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/queryset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    queryset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/reverse_alias_resolver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reverse_alias_resolver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/queryset/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/relations/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    relations
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_7">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_14_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_7">
            <span class="md-nav__icon md-icon"></span>
            relations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/relations/alias_manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    alias_manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/relations/querysetproxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    querysetproxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/relations/relation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    relation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/relations/relation_manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    relation_manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/relations/relation_proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    relation_proxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/relations/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14_1_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/signals/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    signals
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_14_1_8">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_14_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_1_8">
            <span class="md-nav__icon md-icon"></span>
            signals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/signals/signal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    signal
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pydantic-methods" class="md-nav__link">
    pydantic methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#construct" class="md-nav__link">
    construct
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dict" class="md-nav__link">
    dict
  </a>
  
    <nav class="md-nav" aria-label="dict">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#include-ormar-modified" class="md-nav__link">
    include (ormar modified)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude-ormar-modified" class="md-nav__link">
    exclude (ormar modified)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_unset" class="md-nav__link">
    exclude_unset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_defaults" class="md-nav__link">
    exclude_defaults
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_none" class="md-nav__link">
    exclude_none
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_primary_keys-ormar-only" class="md-nav__link">
    exclude_primary_keys (ormar only)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_through_models-ormar-only" class="md-nav__link">
    exclude_through_models (ormar only)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json" class="md-nav__link">
    json
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get_pydantic" class="md-nav__link">
    get_pydantic
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load" class="md-nav__link">
    load
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load_all" class="md-nav__link">
    load_all
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#save" class="md-nav__link">
    save
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    update
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upsert" class="md-nav__link">
    upsert
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    delete
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#save_related" class="md-nav__link">
    save_related
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="model-methods">Model methods</h1>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Main interaction with the databases is exposed through a <code>QuerySet</code> object exposed on 
each model as <code>Model.objects</code> similar to the django orm.</p>
<p>To read more about <strong>quering, joining tables, excluding fields etc. visit <a href="../../queries/">queries</a> section.</strong></p>
</div>
<p>Each model instance have a set of methods to <code>save</code>, <code>update</code> or <code>load</code> itself.</p>
<p>Available methods are described below.</p>
<h2 id="pydantic-methods"><code>pydantic</code> methods</h2>
<p>Note that each <code>ormar.Model</code> is also a <code>pydantic.BaseModel</code>, so all <code>pydantic</code> methods are also available on a model,
especially <code>dict()</code> and <code>json()</code> methods that can also accept <code>exclude</code>, <code>include</code> and other parameters.</p>
<p>To read more check <a href="https://pydantic-docs.helpmanual.io/">pydantic</a> documentation</p>
<h2 id="construct">construct</h2>
<p><code>construct</code> is a raw equivalent of <code>__init__</code> method used for construction of new instances.</p>
<p>The difference is that <code>construct</code> skips validations, so it should be used when you know that data is correct and can be trusted.
The benefit of using construct is the speed of execution due to skipped validation.</p>
<div class="admonition note">
<p class="admonition-title">Note<p>Note that in contrast to <code>pydantic.construct</code> method - the <code>ormar</code> equivalent will also process the nested related models.</p>
</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning<p>Bear in mind that due to skipped validation the <code>construct</code> method does not perform any conversions, checks etc. 
So it's your responsibility to provide that data that is valid and can be consumed by the database.</p>
<p>The only two things that construct still performs are:</p>
<ul>
<li>Providing a <code>default</code> value for not set fields</li>
<li>Initialize nested ormar models if you pass a dictionary or a primary key value</li>
</ul>
</p>
</div>
<h2 id="dict">dict</h2>
<p><code>dict</code> is a method inherited from <code>pydantic</code>, yet <code>ormar</code> adds its own parameters and has some nuances when working with default values,
therefore it's listed here for clarity.</p>
<p><code>dict</code> as the name suggests export data from model tree to dictionary.</p>
<p>Explanation of dict parameters:</p>
<h3 id="include-ormar-modified">include (<code>ormar</code> modified)</h3>
<p><code>include: Union[Set, Dict] = None</code></p>
<p>Set or dictionary of field names to include in returned dictionary.</p>
<p>Note that <code>pydantic</code> has an uncommon pattern of including/ excluding fields in lists (so also nested models) by an index.
And if you want to exclude the field in all children you need to pass a <code>__all__</code> key to dictionary. </p>
<p>You cannot exclude nested models in <code>Set</code>s in <code>pydantic</code> but you can in <code>ormar</code> 
(by adding double underscore on relation name i.e. to exclude name of category for a book you cen use <code>exclude={"book__category__name"}</code>)</p>
<p><code>ormar</code> does not support by index exclusion/ inclusions and accepts a simplified and more user-friendly notation.</p>
<p>To check how you can include/exclude fields, including nested fields check out <a href="../../queries/select-columns/#fields">fields</a> section that has an explanation and a lot of samples.</p>
<div class="admonition note">
<p class="admonition-title">Note<p>The fact that in <code>ormar</code> you can exclude nested models in sets, you can exclude from a whole model tree in <code>response_model_exclude</code> and <code>response_model_include</code> in fastapi!</p>
</p>
</div>
<h3 id="exclude-ormar-modified">exclude (<code>ormar</code> modified)</h3>
<p><code>exclude: Union[Set, Dict] = None</code></p>
<p>Set or dictionary of field names to exclude in returned dictionary.</p>
<p>Note that <code>pydantic</code> has an uncommon pattern of including/ excluding fields in lists (so also nested models) by an index.
And if you want to exclude the field in all children you need to pass a <code>__all__</code> key to dictionary. </p>
<p>You cannot exclude nested models in <code>Set</code>s in <code>pydantic</code> but you can in <code>ormar</code> 
(by adding double underscore on relation name i.e. to exclude name of category for a book you cen use <code>exclude={"book__category__name"}</code>)</p>
<p><code>ormar</code> does not support by index exclusion/ inclusions and accepts a simplified and more user-friendly notation.</p>
<p>To check how you can include/exclude fields, including nested fields check out <a href="../../queries/select-columns/#fields">fields</a> section that has an explanation and a lot of samples.</p>
<div class="admonition note">
<p class="admonition-title">Note<p>The fact that in <code>ormar</code> you can exclude nested models in sets, you can exclude from a whole model tree in <code>response_model_exclude</code> and <code>response_model_include</code> in fastapi!</p>
</p>
</div>
<h3 id="exclude_unset">exclude_unset</h3>
<p><code>exclude_unset: bool = False</code></p>
<p>Flag indicates whether fields which were not explicitly set when creating the model should be excluded from the returned dictionary.</p>
<div class="admonition warning">
<p class="admonition-title">Warning<p>Note that after you save data into database each field has its own value -&gt; either provided by you, default, or <code>None</code>.</p>
<p>That means that when you load the data from database, <strong>all</strong> fields are set, and this flag basically stop working! </p>
</p>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;categories&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;Test&quot;</span><span class="p">)</span>
    <span class="n">visibility</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Boolean</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Item</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;items&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">9.99</span><span class="p">)</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Category</span><span class="p">]</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">ManyToMany</span><span class="p">(</span><span class="n">Category</span><span class="p">)</span>

<span class="n">category</span> <span class="o">=</span> <span class="n">Category</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Test 2&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">category</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Test 2&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;visibility&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="k">assert</span> <span class="n">category</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_unset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Test 2&#39;</span><span class="p">}</span>

<span class="k">await</span> <span class="n">category</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">category2</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">category2</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Test 2&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;visibility&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="c1"># NOTE how after loading from db all fields are set explicitly</span>
<span class="c1"># as this is what happens when you populate a model from db</span>
<span class="k">assert</span> <span class="n">category2</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_unset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[],</span>
                                              <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Test 2&#39;</span><span class="p">,</span> <span class="s1">&#39;visibility&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="exclude_defaults">exclude_defaults</h3>
<p><code>exclude_defaults: bool = False</code></p>
<p>Flag indicates are equal to their default values (whether set or otherwise) should be excluded from the returned dictionary</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;categories&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;Test&quot;</span><span class="p">)</span>
    <span class="n">visibility</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Boolean</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Item</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;items&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">9.99</span><span class="p">)</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Category</span><span class="p">]</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">ManyToMany</span><span class="p">(</span><span class="n">Category</span><span class="p">)</span>

<span class="n">category</span> <span class="o">=</span> <span class="n">Category</span><span class="p">()</span>
<span class="c1"># note that Integer pk is by default autoincrement so optional</span>
<span class="k">assert</span> <span class="n">category</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Test&#39;</span><span class="p">,</span> <span class="s1">&#39;visibility&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="k">assert</span> <span class="n">category</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_defaults</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[]}</span>

<span class="c1"># save and reload the data</span>
<span class="k">await</span> <span class="n">category</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">category2</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="k">assert</span> <span class="n">category2</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Test&#39;</span><span class="p">,</span> <span class="s1">&#39;visibility&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="k">assert</span> <span class="n">category2</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_defaults</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[]}</span>
</code></pre></div></td></tr></table></div>
<h3 id="exclude_none">exclude_none</h3>
<p><code>exclude_none: bool = False</code></p>
<p>Flag indicates whether fields which are equal to <code>None</code> should be excluded from the returned dictionary.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;categories&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">visibility</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Boolean</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Item</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;items&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">9.99</span><span class="p">)</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Category</span><span class="p">]</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">ManyToMany</span><span class="p">(</span><span class="n">Category</span><span class="p">)</span>


<span class="n">category</span> <span class="o">=</span> <span class="n">Category</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">category</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="s1">&#39;visibility&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="c1"># note the id is not set yet so None and excluded</span>
<span class="k">assert</span> <span class="n">category</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;visibility&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

<span class="k">await</span> <span class="n">category</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">category2</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">category2</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="s1">&#39;visibility&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="k">assert</span> <span class="n">category2</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[],</span>
                                             <span class="s1">&#39;visibility&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="exclude_primary_keys-ormar-only">exclude_primary_keys (<code>ormar</code> only)</h3>
<p><code>exclude_primary_keys: bool = False</code></p>
<p>Setting flag to <code>True</code> will exclude all primary key columns in a tree, including nested models.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Item</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;items&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="n">item1</span> <span class="o">=</span> <span class="n">Item</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Test Item&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">item1</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Test Item&quot;</span><span class="p">}</span>
<span class="k">assert</span> <span class="n">item1</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_primary_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Test Item&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="exclude_through_models-ormar-only">exclude_through_models (<code>ormar</code> only)</h3>
<p><code>exclude_through_models: bool = False</code></p>
<p><code>Through</code> models are auto added for every <code>ManyToMany</code> relation, and they hold additional parameters on linking model/table.</p>
<p>Setting the <code>exclude_through_models=True</code> will exclude all through models, including Through models of submodels.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;categories&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Item</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;items&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Category</span><span class="p">]</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">ManyToMany</span><span class="p">(</span><span class="n">Category</span><span class="p">)</span>

<span class="c1"># tree defining the models</span>
<span class="n">item_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
            <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test cat&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test cat2&quot;</span><span class="p">}],</span>
        <span class="p">}</span>
<span class="c1"># save whole tree</span>
<span class="k">await</span> <span class="n">Item</span><span class="p">(</span><span class="o">**</span><span class="n">item_dict</span><span class="p">)</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">follow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># get the saved values</span>
<span class="n">item</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Item</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="s2">&quot;categories&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="c1"># by default you can see the through models (itemcategory)</span>
<span class="k">assert</span> <span class="n">item</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;test&#39;</span><span class="p">,</span> 
                       <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[</span>
                           <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;test cat&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;itemcategory&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}},</span> 
                           <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;test cat2&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;itemcategory&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}}</span>
                       <span class="p">]}</span>

<span class="c1"># you can exclude those fields/ models</span>
<span class="k">assert</span> <span class="n">item</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_through_models</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span>
                       <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;test&#39;</span><span class="p">,</span> 
                       <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[</span>
                           <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;test cat&#39;</span><span class="p">},</span> 
                           <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;test cat2&#39;</span><span class="p">}</span>
                       <span class="p">]}</span>
</code></pre></div></td></tr></table></div>
<h2 id="json">json</h2>
<p><code>json()</code> has exactly the same parameters as <code>dict()</code> so check above.</p>
<p>Of course the end result is a string with json representation and not a dictionary.</p>
<h2 id="get_pydantic">get_pydantic</h2>
<p><code>get_pydantic(include: Union[Set, Dict] = None, exclude: Union[Set, Dict] = None)</code></p>
<p>This method allows you to generate <code>pydantic</code> models from your ormar models without you needing to retype all the fields.</p>
<p>Note that if you have nested models, it <strong>will generate whole tree of pydantic models for you!</strong></p>
<p>Moreover, you can pass <code>exclude</code> and/or <code>include</code> parameters to keep only the fields that you want to, including in nested models.</p>
<p>That means that this way you can effortlessly create pydantic models for requests and responses in <code>fastapi</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note<p>To read more about possible excludes/includes and how to structure your exclude dictionary or set visit <a href="../../queries/select-columns/#fields">fields</a> section of documentation</p>
</p>
</div>
<p>Given sample ormar models like follows:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">metadata</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">MetaData</span><span class="p">()</span>
<span class="n">database</span> <span class="o">=</span> <span class="n">databases</span><span class="o">.</span><span class="n">Database</span><span class="p">(</span><span class="n">DATABASE_URL</span><span class="p">,</span> <span class="n">force_rollback</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">BaseMeta</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">ModelMeta</span><span class="p">):</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
    <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

<span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">(</span><span class="n">BaseMeta</span><span class="p">):</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;categories&quot;</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Item</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">(</span><span class="n">BaseMeta</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>
    <span class="n">category</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Category</span><span class="p">]</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Category</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>You can generate pydantic models out of it with a one simple call.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">PydanticCategory</span> <span class="o">=</span> <span class="n">Category</span><span class="o">.</span><span class="n">get_pydantic</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Which will generate model equivalent of:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
</code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Warning<p>Note that it's not a good practice to have several classes with same name in one module, as well as it would break <code>fastapi</code> docs.
Thats's why ormar adds random 3 uppercase letters to the class name. In example above it means that in reality class would be named i.e. <code>Category_XIP(BaseModel)</code>.</p>
</p>
</div>
<p>To exclude or include nested fields you can use dict or double underscores.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># both calls are equivalent</span>
<span class="n">PydanticCategory</span> <span class="o">=</span> <span class="n">Category</span><span class="o">.</span><span class="n">get_pydantic</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;items__id&quot;</span><span class="p">})</span>
<span class="n">PydanticCategory</span> <span class="o">=</span> <span class="n">Category</span><span class="o">.</span><span class="n">get_pydantic</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span> <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">}})</span>
</code></pre></div></td></tr></table></div>
<p>and results in a generated structure as follows:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Item</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Item</span><span class="p">]]</span>
</code></pre></div></td></tr></table></div></p>
<p>Of course, you can use also deeply nested structures and ormar will generate it pydantic equivalent you (in a way that exclude loops).</p>
<p>Note how <code>Item</code> model above does not have a reference to <code>Category</code> although in ormar the relation is bidirectional (and <code>ormar.Item</code> has <code>categories</code> field).</p>
<div class="admonition warning">
<p class="admonition-title">Warning<p>Note that the generated pydantic model will inherit all <strong>field</strong> validators from the original <code>ormar</code> model, that includes the ormar choices validator as well as validators defined with <code>pydantic.validator</code> decorator.</p>
<p>But, at the same time all root validators present on <code>ormar</code> models will <strong>NOT</strong> be copied to the generated pydantic model. Since root validator can operate on all fields and a user can exclude some fields during generation of pydantic model it's not safe to copy those validators.
If required, you need to redefine/ manually copy them to generated pydantic model.</p>
</p>
</div>
<h2 id="load">load</h2>
<p>By default when you query a table without prefetching related models, the ormar will still construct
your related models, but populate them only with the pk value. You can load the related model by calling <code>load()</code> method.</p>
<p><code>load()</code> can also be used to refresh the model from the database (if it was changed by some other process). </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">track</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Track</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;The Bird&#39;</span><span class="p">)</span>
<span class="n">track</span><span class="o">.</span><span class="n">album</span><span class="o">.</span><span class="n">pk</span> <span class="c1"># will return malibu album pk (1)</span>
<span class="n">track</span><span class="o">.</span><span class="n">album</span><span class="o">.</span><span class="n">name</span> <span class="c1"># will return None</span>

<span class="c1"># you need to actually load the data first</span>
<span class="k">await</span> <span class="n">track</span><span class="o">.</span><span class="n">album</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="n">track</span><span class="o">.</span><span class="n">album</span><span class="o">.</span><span class="n">name</span> <span class="c1"># will return &#39;Malibu&#39;</span>
</code></pre></div></td></tr></table></div>
<h2 id="load_all">load_all</h2>
<p><code>load_all(follow: bool = False, exclude: Union[List, str, Set, Dict] = None) -&gt; Model</code></p>
<p>Method works like <code>load()</code> but also goes through all relations of the <code>Model</code> on which the method is called, 
and reloads them from database.</p>
<p>By default the <code>load_all</code> method loads only models that are directly related (one step away) to the model on which the method is called.</p>
<p>But you can specify the <code>follow=True</code> parameter to traverse through nested models and load all of them in the relation tree.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To avoid circular updates with <code>follow=True</code> set, <code>load_all</code> keeps a set of already visited Models, 
and won't perform nested <code>loads</code> on Models that were already visited.</p>
<p>So if you have a diamond or circular relations types you need to perform the loads in a manual way.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># in example like this the second Street (coming from City) won&#39;t be load_all, so ZipCode won&#39;t be reloaded</span>
<span class="n">Street</span> <span class="o">-&gt;</span> <span class="n">District</span> <span class="o">-&gt;</span> <span class="n">City</span> <span class="o">-&gt;</span> <span class="n">Street</span> <span class="o">-&gt;</span> <span class="n">ZipCode</span>
</code></pre></div></td></tr></table></div>
</div>
<p>Method accepts also optional exclude parameter that works exactly the same as exclude_fields method in <code>QuerySet</code>.
That way you can remove fields from related models being refreshed or skip whole related models.</p>
<p>Method performs one database query so it's more efficient than nested calls to <code>load()</code> and <code>all()</code> on related models.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To read more about <code>exclude</code> read <a href="../../queries/select-columns/#exclude_fields">exclude_fields</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All relations are cleared on <code>load_all()</code>, so if you exclude some nested models they will be empty after call.</p>
</div>
<h2 id="save">save</h2>
<p><code>save() -&gt; self</code></p>
<p>You can create new models by using <code>QuerySet.create()</code> method or by initializing your model as a normal pydantic model 
and later calling <code>save()</code> method.</p>
<p><code>save()</code> can also be used to persist changes that you made to the model, but only if the primary key is not set or the model does not exist in database.</p>
<p>The <code>save()</code> method does not check if the model exists in db, so if it does you will get a integrity error from your selected db backend if trying to save model with already existing primary key. </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">track</span> <span class="o">=</span> <span class="n">Track</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;The Bird&#39;</span><span class="p">)</span>
<span class="k">await</span> <span class="n">track</span><span class="o">.</span><span class="n">save</span><span class="p">()</span> <span class="c1"># will persist the model in database</span>

<span class="n">track</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Track</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;The Bird&#39;</span><span class="p">)</span>
<span class="k">await</span> <span class="n">track</span><span class="o">.</span><span class="n">save</span><span class="p">()</span> <span class="c1"># will raise integrity error as pk is populated</span>
</code></pre></div></td></tr></table></div>
<h2 id="update">update</h2>
<p><code>update(_columns: List[str] = None, **kwargs) -&gt; self</code></p>
<p>You can update models by using <code>QuerySet.update()</code> method or by updating your model attributes (fields) and calling <code>update()</code> method.</p>
<p>If you try to update a model without a primary key set a <code>ModelPersistenceError</code> exception will be thrown.</p>
<p>To persist a newly created model use <code>save()</code> or <code>upsert(**kwargs)</code> methods.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">track</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Track</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;The Bird&#39;</span><span class="p">)</span>
<span class="k">await</span> <span class="n">track</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;The Bird Strikes Again&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>To update only selected columns from model into the database provide a list of columns that should be updated to <code>_columns</code> argument.</p>
<p>In example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">tablename</span> <span class="o">=</span> <span class="s2">&quot;movies&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>
    <span class="n">year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>
    <span class="n">profit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Float</span><span class="p">()</span>

<span class="n">terminator</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Movie</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Terminator&#39;</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">profit</span><span class="o">=</span><span class="mf">0.078</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="n">terminator</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Terminator 2&quot;</span>
<span class="n">terminator</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="mi">1991</span>
<span class="n">terminator</span><span class="o">.</span><span class="n">profit</span> <span class="o">=</span> <span class="mf">0.520</span>

<span class="c1"># update only name</span>
<span class="k">await</span> <span class="n">terminator</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">_columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

<span class="c1"># note that terminator instance was not reloaded so</span>
<span class="k">assert</span> <span class="n">terminator</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">1991</span>

<span class="c1"># but once you load the data from db you see it was not updated</span>
<span class="k">await</span> <span class="n">terminator</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">terminator</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">1984</span>
</code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Warning<p>Note that <code>update()</code> does not refresh the instance of the Model, so if you change more columns than you pass in <code>_columns</code> list your Model instance will have different values than the database!</p>
</p>
</div>
<h2 id="upsert">upsert</h2>
<p><code>upsert(**kwargs) -&gt; self</code></p>
<p>It's a proxy to either <code>save()</code> or <code>update(**kwargs)</code> methods described above.</p>
<p>If the primary key is set -&gt; the <code>update</code> method will be called.</p>
<p>If the pk is not set the <code>save()</code> method will be called.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">track</span> <span class="o">=</span> <span class="n">Track</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;The Bird&#39;</span><span class="p">)</span>
<span class="k">await</span> <span class="n">track</span><span class="o">.</span><span class="n">upsert</span><span class="p">()</span> <span class="c1"># will call save as the pk is empty</span>

<span class="n">track</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Track</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;The Bird&#39;</span><span class="p">)</span>
<span class="k">await</span> <span class="n">track</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;The Bird Strikes Again&#39;</span><span class="p">)</span> <span class="c1"># will call update as pk is already populated</span>
</code></pre></div></td></tr></table></div>
<h2 id="delete">delete</h2>
<p>You can delete models by using <code>QuerySet.delete()</code> method or by using your model and calling <code>delete()</code> method.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">track</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Track</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;The Bird&#39;</span><span class="p">)</span>
<span class="k">await</span> <span class="n">track</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span> <span class="c1"># will delete the model from database</span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Note that that <code>track</code> object stays the same, only record in the database is removed.</p>
</div>
<h2 id="save_related">save_related</h2>
<p><code>save_related(follow: bool = False, save_all: bool = False, exclude=Optional[Union[Set, Dict]]) -&gt; None</code></p>
<p>Method goes through all relations of the <code>Model</code> on which the method is called, 
and calls <code>upsert()</code> method on each model that is <strong>not</strong> saved. </p>
<p>To understand when a model is saved check <a href="../models/index/#model-save-status">save status</a> section above.</p>
<p>By default the <code>save_related</code> method saved only models that are directly related (one step away) to the model on which the method is called.</p>
<p>But you can specify the <code>follow=True</code> parameter to traverse through nested models and save all of them in the relation tree.</p>
<p>By default save_related saves only model that has not <code>saved</code> status, meaning that they were modified in current scope.</p>
<p>If you want to force saving all of the related methods use <code>save_all=True</code> flag, which will upsert all related models, regardless of their save status.</p>
<p>If you want to skip saving some of the relations you can pass <code>exclude</code> parameter. </p>
<p><code>Exclude</code> can be a set of own model relations,
or it can be a dictionary that can also contain nested items. </p>
<div class="admonition note">
<p class="admonition-title">Note<p>Note that <code>exclude</code> parameter in <code>save_related</code> accepts only relation fields names, so
if you pass any other fields they will be saved anyway</p>
</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note<p>To read more about the structure of possible values passed to <code>exclude</code> check <code>Queryset.fields</code> method documentation.</p>
</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To avoid circular updates with <code>follow=True</code> set, <code>save_related</code> keeps a set of already visited Models on each branch of relation tree, 
and won't perform nested <code>save_related</code> on Models that were already visited.</p>
<p>So if you have circular relations types you need to perform the updates in a manual way.</p>
</div>
<p>Note that with <code>save_all=True</code> and <code>follow=True</code> you can use <code>save_related()</code> to save whole relation tree at once.</p>
<p>Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Department</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">department_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Course</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">course_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">completed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Boolean</span><span class="p">()</span>
    <span class="n">department</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Department</span><span class="p">]</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Department</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">ormar</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">courses</span> <span class="o">=</span> <span class="n">ormar</span><span class="o">.</span><span class="n">ManyToMany</span><span class="p">(</span><span class="n">Course</span><span class="p">)</span>

<span class="n">to_save</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;department_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Ormar&quot;</span><span class="p">,</span>
            <span class="s2">&quot;courses&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;course_name&quot;</span><span class="p">:</span> <span class="s2">&quot;basic1&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;completed&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="s2">&quot;students&quot;</span><span class="p">:</span> <span class="p">[</span>
                     <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Jack&quot;</span><span class="p">},</span>
                     <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Abi&quot;</span><span class="p">}</span>
                 <span class="p">]},</span>
                <span class="p">{</span><span class="s2">&quot;course_name&quot;</span><span class="p">:</span> <span class="s2">&quot;basic2&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;completed&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="s2">&quot;students&quot;</span><span class="p">:</span> <span class="p">[</span>
                     <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Kate&quot;</span><span class="p">},</span>
                     <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Miranda&quot;</span><span class="p">}</span>
                 <span class="p">]</span>
                 <span class="p">},</span>
            <span class="p">],</span>
        <span class="p">}</span>
<span class="c1"># initialize whole tree</span>
<span class="n">department</span> <span class="o">=</span> <span class="n">Department</span><span class="p">(</span><span class="o">**</span><span class="n">to_save</span><span class="p">)</span>

<span class="c1"># save all at once (one after another)</span>
<span class="k">await</span> <span class="n">department</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">follow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">department_check</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Department</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">select_all</span><span class="p">(</span><span class="n">follow</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="n">to_exclude</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;courses&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
        <span class="s2">&quot;students&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;studentcourse&quot;</span><span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1"># after excluding ids and through models you get exact same payload used to</span>
<span class="c1"># construct whole tree</span>
<span class="k">assert</span> <span class="n">department_check</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">to_exclude</span><span class="p">)</span> <span class="o">==</span> <span class="n">to_save</span>
</code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code>save_related()</code> iterates all relations and all models and upserts() them one by one,
so it will save all models but might not be optimal in regard of number of database queries.</p>
</div>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
      
        <script src="../../javascripts/config.js"></script>
      
    
  </body>
</html>